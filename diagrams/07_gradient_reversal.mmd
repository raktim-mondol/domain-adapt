graph LR
    subgraph "Forward Pass"
        F_IN[Input: z<br/>512-dim features]
        F_IDEN[Identity: y = x]
        F_OUT[Output: z<br/>Unchanged]
        F_IN --> F_IDEN
        F_IDEN --> F_OUT
    end

    subgraph "Backward Pass"
        B_IN[Gradient: ∂L/∂z]
        B_REV[Reverse: -λ·∂L/∂z]
        B_OUT[Updated: -λ·∂L/∂z]
        B_IN --> B_REV
        B_REV --> B_OUT
    end

    subgraph "Effect"
        EFF1[Discriminator tries to<br/>classify domains correctly]
        EFF2[Feature extractor receives<br/>reversed gradients]
        EFF3[Features become<br/>domain-invariant]
        EFF1 --> EFF2
        EFF2 --> EFF3
    end

    F_OUT -.->|Training| B_IN
    B_OUT -.->|Affects| EFF1

    style F_IDEN fill:#ccffcc
    style B_REV fill:#ffcccc
    style EFF3 fill:#ffffcc
